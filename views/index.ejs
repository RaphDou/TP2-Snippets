<%- include('includes/head.ejs') %>

  <body>
    <header>
      <%- include('includes/navigation.ejs') %>
    </header>

    <% if (articles.length> 0) { %>
      <h1 class="mb-4 text-light mt-5">Tags associés</h1>
      <div class="row row-cols-1 row-cols-md-2 g-4">
        <% for (let article of articles) { %>
          <article class="col mb-5">
            <div class="card shadow">
              <div class="card-body">
                <h1 class="mb-4 mt-5 tag-filter" data-tag="<%= article.tags %>"><%= article.tags %></h1>
              </div>
              <div class="card-footer bg-white">
                <div class="btn-group" role="group" aria-label="Actions">
                  <a href="/article/<%= article.id %>" class="btn btn-success"><i class="bi bi-eye"></i>
                    Voir</a>
                </div>
              </div>
            </div>
          </article>
        <% } %>
        
      </div>
      <% } else { %>
        <section class="container mt-5">
          <div class="row justify-content-center">
            <div class="col-md-6 text-center">
              <h1 class="display-4">:&#40;</h1>
              <p class="lead">Il ne semble pas avoir de tags pour l'instant!</p>
              <a href="add-article" class="btn btn-primary"><i class="bi bi-house-door"></i>Je veux créer un
                snippets!</a>
            </div>
          </div>
        </section>
        <% } %>

        <script>
          const tags = document.querySelectorAll('.tag-filter');
          tags.forEach(tag => {
            tag.addEventListener('click', () => {
              const tagValue = tag.dataset.tag;
              const articles = document.querySelectorAll('.col');
              articles.forEach(article => {
                if (!article.querySelector(`[data-tag="${tagValue}"]`)) {
                  article.style.display = 'none';
                } else {
                  article.style.display = 'block';
                }
              });
            });
          });
        </script>
        




          <main class="container mt-3 mb-5 text-center">
            <% if (articles.length> 0) { %>
              <h1 class="mb-4 text-light mt-5">Mes Snippets</h1>
              <div class="row row-cols-1 row-cols-md-2 g-4">
                <% for (let article of articles) { %>
                  <article class="col mb-5">
                    <div class="card shadow">
                      <div class="card-body">
                        <h2 class="card-title">
                          <%= article.title %>
                        </h2>
                        <p class="card-text">
                          <%= article.tags %>
                        </p>
                      </div>
                      <div class="card-footer bg-white">
                        <div class="btn-group" role="group" aria-label="Actions">
                          <a href="/article/<%= article.id %>" class="btn btn-success"><i class="bi bi-eye"></i>
                            Voir</a>
                          <a href="/edit-article/<%= article.id %>" class="btn btn-warning"><i class="bi bi-pencil"></i>
                            Editer</a>
                          <a href="/delete/<%= article.id %>" class="btn btn-danger"><i class="bi bi-trash"></i>
                            Supprimer</a>
                        </div>
                      </div>
                    </div>
                  </article>

                  <% } %>
              </div>
              <% } else { %>
                <section class="container mt-5">
                  <div class="row justify-content-center">
                    <div class="col-md-6 text-center">
                      <h1 class="display-4">:&#40;</h1>
                      <p class="lead">Il ne semble pas avoir de snippets pour l'instant!</p>
                      <a href="add-article" class="btn btn-primary"><i class="bi bi-house-door"></i>Je veux créer un
                        snippets!</a>
                    </div>
                  </div>
                </section>
                <% } %>
          </main>



          <%- include('includes/end.ejs') %>
  </body>